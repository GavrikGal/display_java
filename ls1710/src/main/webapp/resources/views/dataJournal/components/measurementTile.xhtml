<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:component="http://java.sun.com/jsf/composite/views/dataJournal/components"
	xmlns:sec="http://www.springframework.org/security/tags">


	<!--  INTERFACE -->
  <composite:interface>
    <composite:attribute name="row" type="com.kbdisplay.ls1710.view.dataJournal.Row"/>
    <composite:attribute name="widthFirstColumn" />        
  </composite:interface>

  <!--  IMPLEMENTATION -->          
    <composite:implementation>
    
    	<p:panel styleClass="tile">
       		<h:panelGrid columns="3" styleClass="tile-content-grid">
       			<h:column width="#{cc.attrs.widthFirstColumn}">
       			
       				<p:graphicImage width="#{cc.attrs.widthFirstColumn}" name="photo/38.png"/>
       			
       			</h:column>
       			<h:column width="#{cc.attrs.widthFirstColumn}" >
	       			<h:panelGrid columns="1" style="width: #{cc.attrs.widthFirstColumn}">
	       					<h:outputText value="#{cc.attrs.row.equipment.model.name}" />
	       					<h:outputText value="#{cc.attrs.row.equipment.serialNumber}" />
	       			</h:panelGrid>
       			</h:column>
       			
       			<h:panelGrid columns="1">
       					<sec:authorize access="isAnonymous()" >
							<p:outputLabel value="#{msg['is_restricted_access']}" rendered="#{cc.attrs.row.measurement.restrictedAccess}"/>
						
							<p:dataGrid var="spectrum"
								value="#{cc.attrs.row.spectrums}" columns="1" rows="2"
								id="spectrums" paginator="false" styleClass="internalTable" rendered="#{not cc.attrs.row.measurement.restrictedAccess}">
								<component:spectrumRow spectrum="#{spectrum}"
									widthFirstColumn="140px" />
							</p:dataGrid>
						</sec:authorize>
						
						<sec:authorize access="hasRole('ROLE_USER')" >
							<p:dataGrid var="spectrum"
								value="#{cc.attrs.row.spectrums}" columns="1" rows="2"
								id="spectrums" paginator="false" styleClass="internalTable"  style="border-color: red">
								<component:spectrumRow spectrum="#{spectrum}"
									widthFirstColumn="140px" />
								
							</p:dataGrid>
							<p:separator style="border-color: #CA8080; height:1px; line-height:2px; margin: 0px; padding: 0px;" rendered="#{cc.attrs.row.measurement.restrictedAccess}"/>
						</sec:authorize>
       			</h:panelGrid>
       			       			
       		</h:panelGrid>
       		
       	</p:panel>
    
  </composite:implementation>



</html>