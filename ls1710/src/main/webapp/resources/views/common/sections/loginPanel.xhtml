<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:sec="http://www.springframework.org/security/tags">

<!-- 	<sec:authorize access="isAnonymous()" >
					<p:outputLabel id="test" value="asdf"/>
				</sec:authorize>
				
				Rendered only if user has all of the listed roles
				<h:outputText value="Lorem ipsum dolor sit amet areAllGranted" rendered="#{sec:areAllGranted('ROLE_USER, ROLE_ADMIN')}"/>
			
				Rendered only if user does not have any of the listed roles
				<h:outputText value="Lorem ipsum dolor sit amet areNotGranted" rendered="#{sec:areNotGranted('ROLE_USER, ROLE_ADMIN')}"/>
			
				Rendered only if user has any of the listed roles
				<h:outputText value="Lorem ipsum dolor sit amet areAnyGranted" rendered="#{sec:areAnyGranted('ROLE_USER, ROLE_ADMIN')}"/> -->
	<p:outputPanel id="loginSection">			
		<sec:authorize access="!isAnonymous()" >
			<p:commandButton
				id="logout" 
				value="#{msg['login_btn_logout']}"
				action="#{loginMgmtBean.logout}"
				style="float:right; top: -53px; right: 10px; position: relative;"
				update=":messages:message @(.header)"/>
		</sec:authorize>
		
		<sec:authorize access="isAnonymous()" >
			<p:commandButton 
				id="loginBtn" 
				value="#{msg['login_btn_enter']}"
				style="float:right; top: -53px; right: 10px; position: relative; " 
				type="button"/>
				
			<p:overlayPanel 
				id="loginPanel" 
				for="loginBtn" 
				dynamic="true" 
				widgetVar="loginDialogWV">
				
				<h:form  
					id="loginFormId" 
					prependId="false">
					
					<p:panelGrid columns="2">
						<p:outputLabel 
							value="#{msg['label_userName']}" 
							for="userName"/>
						<p:inputText 
							id="userName" 
							required="true" 
							value="#{loginMgmtBean.userName}" 
							requiredMessage="#{msg['msg_required_userName']}"/>
						
						<p:outputLabel 
							value="#{msg['label_password']}" 
							for="password"/>
						<p:password 
							id="password" 
							required="true" 
							value="#{loginMgmtBean.password}" 
							requiredMessage="#{msg['msg_required_password']}"/>
							
					</p:panelGrid>
					
		
					
				</h:form>
		
				<p:outputPanel>
		       
					<p:commandButton 
		     			id="btnLoginId" 
		     			value="#{msg['dialog_btn_login']}" 
		     			action="#{loginMgmtBean.login}" 
		     			onclick="PF('loginDialogWV').hide()"
		     			styleClass="btnLogin" 
		     			update=":messages:message :form:dataTable loginSection @(.postAuthorizeUpdate)"
		     			icon="ui-icon-check" />
				     			
					<p:commandButton 
						id="btnCancelId"
						value="#{msg['dialog_btn_cansel']}" 
						action="#{loginMgmtBean.cancel}"
						onclick="PF('loginDialogWV').hide()"
		     			styleClass="btnCancel" 
						immediate="true" 
						icon="ui-icon-close" />
		     		
				</p:outputPanel>
			    
			</p:overlayPanel>
		
		</sec:authorize>
	</p:outputPanel>

</ui:composition>